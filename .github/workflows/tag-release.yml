name: Tag Release CI on PR Merge to Development

on:
  workflow_dispatch:
    inputs:
      version_type:
        type: choice
        description: Choose version bump type
        options: 
        - -r major
        - -r minor
        - -r patch
        - -p alpha
        - -p beta
        - -p build
        - -p hotfix
        - -p build
        required: true
        default: "-p build"
  pull_request:
    types:
      - closed
    branches:
      - 'development'
jobs:
  # build:
  #   runs-on: ubuntu-latest

  #   steps:
  #     - name: Checkout Repository
  #       uses: actions/checkout@v2

  #     - name: Set up Node.js
  #       uses: actions/setup-node@v2
  #       with:
  #         node-version: 14

      # - name: Install Dependencies
      #   run: npm install
      # - name: Run Tests
      #   run: npm test

  release_tag:
    # runs-on: ubuntu-latest
    permissions: write-all
    if: github.event_name == 'workflow_dispatch' || (github.event_name == 'pull_request' && github.event.action == 'closed' && github.event.pull_request.merged == true && github.event.pull_request.base.ref == 'development')
    uses: ananta-verse/re-usable-workflow/.github/workflows/create-release.yml@v1.0.0
    secrets: inherit
